import{m as v,P as _,j as c,c as k,o as d,w as C,a as M,b as e,f as i,g as a,i as f,k as g,F as h,l as p,t as n,e as m,C as x}from"./app-C2u-fYBm.js";import{A as j}from"./AuthenticatedLayout-DuW3qImM.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={props:["reservations"],components:{AuthenticatedLayout:j,Link:_,Head:v},data(){return{form:x({id:"",reservation_id:"",code:"",amount:"",active:!1,is_editing:!1}),delete_form:x({id:"",amount:"",active:!1}),selected_reservation:{id:"",code:"",client_name:"",deceased_name:"",payments:[],active:!1},loading_button:!1,disabled_button:!1,is_created:!1,is_updated:!1,is_deleted:!1,search:""}},mounted(){},computed:{filteredReservations(){return this.search?this.reservations.filter(o=>Object.values(o).some(t=>String(t).toLowerCase().includes(this.search.toLowerCase()))):this.reservations}},methods:{closeForm(){this.form.id="",this.form.reservation_id="",this.form.amount="",this.form.code="",this.form.active=!1,this.form.is_editing=!1},payItem(o){this.form.id=o.id,this.form.reservation_id=o.id,this.form.amount=o.amount,this.form.code=o.code,this.form.active=!0,this.form.is_editing=!0},viewItem(o){this.selected_reservation.id=o.id,this.selected_reservation.code=o.code,this.selected_reservation.client_name=o.client!=null?o.client.full_name:"",this.selected_reservation.deceased_name=o.deceased!=null?o.deceased.full_name:"",this.selected_reservation.payments=o.payments,this.selected_reservation.active=!0},closeViewItem(){this.selected_reservation.id="",this.selected_reservation.code="",this.selected_reservation.client_name="",this.selected_reservation.deceased_name="",this.selected_reservation.payments="",this.selected_reservation.active=!1},OpenDeleteForm(o){this.delete_form.id=o.id,this.delete_form.amount=o.amount,this.delete_form.active=!0},CloseDeleteForm(){this.delete_form.id="",this.delete_form.amount="",this.delete_form.active=!1},save(){this.form.post("/payment/store",{onSuccess:()=>{this.closeForm(),this.is_created=!0},onError:()=>{}})},update(){this.form.patch("/payment/update/"+this.form.id,{onSuccess:()=>{this.closeForm(),this.is_updated=!0},onError:()=>{}})},deleteItem(){this.form.delete("/payment/destroy/"+this.delete_form.id,{onSuccess:()=>{this.CloseDeleteForm(),this.is_deleted=!0},onError:()=>{}})}}},D={class:"py-1"},P={class:"mx-auto sm:px-6 lg:px-8"},Z={class:"overflow-hidden bg-white shadow-lg sm:rounded-lg"},V={class:"px-6 pb-6 overflow-x-auto bg-white shadow-md rounded-lg mt-0"},I={key:0,id:"alert-border-1",class:"flex items-center p-4 mb-4 text-green-800 border-t-4 border-green-300 bg-green-50",role:"alert"},A={key:1,id:"alert-border-1",class:"flex items-center p-4 mb-4 text-yellow-800 border-t-4 border-yellow-300 bg-yellow-50",role:"alert"},H={key:2,id:"alert-border-1",class:"flex items-center p-4 mb-4 text-red-800 border-t-4 border-red-300 bg-red-50",role:"alert"},S={class:"mb-2 text-gray-900 flex flex-col md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0"},L={class:"flex items-center space-x-2 w-full md:w-auto"},z={class:"min-w-full border border-gray-200"},N={class:"px-4 py-2"},E={class:"px-4 py-2"},R={class:"px-4 py-2"},T={class:"px-4 py-2"},U={class:"px-4 py-2"},O={class:"px-4 py-2"},q={class:"px-4 py-2"},Y={class:"px-4 py-2"},G={class:"px-4 py-2 flex space-x-2"},J=["onClick"],K=["onClick"],Q={key:0,id:"default-modal",tabindex:"-1","aria-hidden":"true",class:"fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-full bg-black bg-opacity-50"},W={class:"relative p-4 w-full max-w-2xl max-h-full"},X={class:"relative bg-white rounded-lg shadow-sm"},$={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200"},ee={class:"text-xl font-semibold text-gray-900"},te={class:"p-4 md:p-5 space-y-4"},se={class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b"},oe={key:1,id:"default-modal",tabindex:"-1","aria-hidden":"true",class:"fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-full bg-black bg-opacity-50"},re={class:"relative p-4 w-full max-w-2xl max-h-full"},le={class:"relative bg-white rounded-lg shadow-sm"},ne={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200"},de={class:"p-4 md:p-5 space-y-4"},ie={class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b"},ae={key:2,id:"default-modal",tabindex:"-1","aria-hidden":"true",class:"fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-full bg-black bg-opacity-50"},ue={class:"relative p-4 w-full max-w-2xl max-h-full"},me={class:"relative bg-white rounded-lg shadow-sm"},ce={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200"},fe={class:"text-xl font-semibold text-gray-900"},ge={class:"p-4 md:p-5 space-y-4"},he={class:"min-w-full border border-gray-200"},pe={class:"px-4 py-2"},xe={class:"px-4 py-2"},be={class:"px-4 py-2"},ye={class:"p-4 md:p-5 border-t border-gray-200 rounded-b"};function we(o,t,ve,_e,r,l){const b=c("Head"),y=c("AuthenticatedLayout");return d(),k(y,null,{default:C(()=>[M(b,{title:"Payments"}),e("div",D,[e("div",P,[e("div",Z,[t[28]||(t[28]=e("div",{class:"p-6 text-gray-900 flex flex-col md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0"},[e("h3",{class:"text-2xl font-bold"},"Payments")],-1)),e("div",V,[r.is_created?(d(),i("div",I,[t[15]||(t[15]=e("svg",{class:"shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[16]||(t[16]=e("div",{class:"ms-3 text-sm font-medium"}," Payment Created Successfully. ",-1)),e("button",{onClick:t[0]||(t[0]=s=>r.is_created=!1),type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-green-50 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8","data-dismiss-target":"#alert-border-1","aria-label":"Close"},t[14]||(t[14]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)]))])):a("",!0),r.is_updated?(d(),i("div",A,[t[18]||(t[18]=e("svg",{class:"shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[19]||(t[19]=e("div",{class:"ms-3 text-sm font-medium"}," Payment Updated Successfully. ",-1)),e("button",{onClick:t[1]||(t[1]=s=>r.is_updated=!1),type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-yellow-50 text-yellow-500 rounded-lg focus:ring-2 focus:ring-yellow-400 p-1.5 hover:bg-yellow-200 inline-flex items-center justify-center h-8 w-8","data-dismiss-target":"#alert-border-1","aria-label":"Close"},t[17]||(t[17]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)]))])):a("",!0),r.is_deleted?(d(),i("div",H,[t[21]||(t[21]=e("svg",{class:"shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[22]||(t[22]=e("div",{class:"ms-3 text-sm font-medium"}," Payment Deleted Successfully. ",-1)),e("button",{onClick:t[2]||(t[2]=s=>r.is_deleted=!1),type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-red-50 text-red-500 rounded-lg focus:ring-2 focus:ring-red-400 p-1.5 hover:bg-red-200 inline-flex items-center justify-center h-8 w-8","data-dismiss-target":"#alert-border-1","aria-label":"Close"},t[20]||(t[20]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)]))])):a("",!0),e("div",S,[e("button",{onClick:t[3]||(t[3]=(...s)=>o.openForm&&o.openForm(...s)),class:"px-4 py-2 mb-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2"},t[23]||(t[23]=[e("svg",{class:"w-6 h-6 text-white-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h14m-7 7V5"})],-1),e("span",null,"New Item",-1)])),e("div",L,[f(e("input",{type:"text",placeholder:"Search...","onUpdate:modelValue":t[4]||(t[4]=s=>r.search=s),class:"px-4 py-2 border rounded-lg w-full md:w-auto focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,r.search]]),t[24]||(t[24]=e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2"},[e("svg",{class:"w-6 h-6","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-width":"2",d:"m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"})]),e("span",null,"Search")],-1))])]),e("table",z,[t[27]||(t[27]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"#"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Code"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Deceased"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Client"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Mode of Payment"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Total"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Paid"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Balance"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Actions")])],-1)),e("tbody",null,[(d(!0),i(h,null,p(l.filteredReservations,(s,u)=>(d(),i("tr",{class:"border-b",key:u},[e("td",N,n(u+1),1),e("td",E,n(s.code),1),e("td",R,n(s.deceased!=null?s.deceased.full_name:""),1),e("td",T,n(s.client!=null?s.client.full_name:""),1),e("td",U,n(s.mode_of_payment),1),e("td",O,"₱"+n(s.total_amount),1),e("td",q,"₱"+n(s.total_payments===null?0:s.total_payments),1),e("td",Y,"₱"+n(s.total_amount-s.total_payments),1),e("td",G,[e("button",{onClick:w=>l.viewItem(s),type:"button",class:"text-white bg-indigo-500 hover:bg-indigo-600 focus:ring-4 focus:outline-none focus:ring-indigo-300 font-medium rounded-lg text-sm px-3 py-2 text-center inline-flex items-center me-2"},t[25]||(t[25]=[e("svg",{class:"w-6 h-6 text-white-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-width":"2",d:"M21 12c0 1.2-4.03 6-9 6s-9-4.8-9-6c0-1.2 4.03-6 9-6s9 4.8 9 6Z"}),e("path",{stroke:"currentColor","stroke-width":"2",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})],-1),m(" View ")]),8,J),s.total_amount-s.total_payments>0?(d(),i("button",{key:0,onClick:w=>l.payItem(s),type:"button",class:"text-white bg-yellow-500 hover:bg-yellow-600 focus:ring-4 focus:outline-none focus:ring-yellow-300 font-medium rounded-lg text-sm px-3 py-2 text-center inline-flex items-center me-2"},t[26]||(t[26]=[e("svg",{class:"w-6 h-6 text-white-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M6 14h2m3 0h5M3 7v10a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1Z"})],-1),m(" Pay ")]),8,K)):a("",!0)])]))),128))])])])])])]),r.form.active?(d(),i("div",Q,[e("div",W,[e("div",X,[e("div",$,[e("h3",ee," Reservation: "+n(r.form.code),1),e("button",{onClick:t[5]||(t[5]=(...s)=>l.closeForm&&l.closeForm(...s)),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center","data-modal-hide":"default-modal"},t[29]||(t[29]=[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),e("span",{class:"sr-only"},"Close modal",-1)]))]),e("div",te,[e("div",null,[t[30]||(t[30]=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900"},"Amount",-1)),f(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.form.amount=s),type:"text",name:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:""},null,512),[[g,r.form.amount]])])]),e("div",se,[e("button",{onClick:t[7]||(t[7]=(...s)=>l.save&&l.save(...s)),"data-modal-hide":"default-modal",type:"button",class:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"Pay"),e("button",{onClick:t[8]||(t[8]=(...s)=>l.closeForm&&l.closeForm(...s)),"data-modal-hide":"default-modal",type:"button",class:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100"},"Cancel")])])])])):a("",!0),r.delete_form.active?(d(),i("div",oe,[e("div",re,[e("div",le,[e("div",ne,[t[32]||(t[32]=e("h3",{class:"text-xl font-semibold text-gray-900"}," Delete this reservation? ",-1)),e("button",{onClick:t[9]||(t[9]=(...s)=>l.closeForm&&l.closeForm(...s)),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center","data-modal-hide":"default-modal"},t[31]||(t[31]=[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),e("span",{class:"sr-only"},"Close modal",-1)]))]),e("div",de,[e("div",null,n(r.delete_form.name),1)]),e("div",ie,[e("button",{onClick:t[10]||(t[10]=(...s)=>l.deleteItem&&l.deleteItem(...s)),"data-modal-hide":"default-modal",type:"button",class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"Yes, Delete"),e("button",{onClick:t[11]||(t[11]=(...s)=>l.CloseDeleteForm&&l.CloseDeleteForm(...s)),"data-modal-hide":"default-modal",type:"button",class:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100"},"Cancel")])])])])):a("",!0),r.selected_reservation.active?(d(),i("div",ae,[e("div",ue,[e("div",me,[e("div",ce,[e("h3",fe,[m(" Reservation: "+n(r.selected_reservation.code),1),t[33]||(t[33]=e("br",null,null,-1)),m(" Client: "+n(r.selected_reservation.client_name),1),t[34]||(t[34]=e("br",null,null,-1)),m(" Deceased: "+n(r.selected_reservation.deceased_name),1),t[35]||(t[35]=e("br",null,null,-1))]),e("button",{onClick:t[12]||(t[12]=(...s)=>l.closeForm&&l.closeForm(...s)),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center","data-modal-hide":"default-modal"},t[36]||(t[36]=[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),e("span",{class:"sr-only"},"Close modal",-1)]))]),e("div",ge,[e("div",null,[e("table",he,[t[37]||(t[37]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"#"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Amount"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Paid on")])],-1)),e("tbody",null,[(d(!0),i(h,null,p(r.selected_reservation.payments,(s,u)=>(d(),i("tr",{class:"border-b",key:u},[e("td",pe,n(u+1),1),e("td",xe,n(s.amount),1),e("td",be,n(s.created_at),1)]))),128))])])])]),e("div",ye,[e("button",{onClick:t[13]||(t[13]=(...s)=>l.closeViewItem&&l.closeViewItem(...s)),"data-modal-hide":"default-modal",type:"button",class:"w-full py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-blue rounded-lg border border-blue-200 hover:bg-blue-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-blue-100"}," Close ")])])])])):a("",!0)]),_:1})}const je=F(B,[["render",we]]);export{je as default};
